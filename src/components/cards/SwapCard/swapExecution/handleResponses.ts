import { standardiseLifiRoute } from '../../../../api/lifi/standardiseLifiRoute'
import { TransactionStatus } from 'rango-types/src/api/shared/transactions'
import { SwapAction, SwapCardStage } from '../swapReducer/types'
import { Dispatch } from 'react'
import { logTxToDB } from '../../../../utils/logTxToDB'
import { action, category } from '../../../../constants/tracking'
import { trackEvent } from '../../../../hooks/useTracking'
import { Route } from '@lifi/types'
import { TransactionStatusResponse } from 'rango-sdk/src/types'
import { StandardRoute } from '../../../../types/StandardRoute'

export const handleRangoResponse = (executedRoute: TransactionStatusResponse, swapDispatch: Dispatch<SwapAction>, stdRoute: StandardRoute) => {
	swapDispatch({ type: 'UPDATE_LAST_SWAP_STEP' })
	stdRoute.executedRoute = executedRoute

	if (executedRoute.status === TransactionStatus.FAILED) {
		swapDispatch({ type: 'SET_SWAP_STAGE', payload: SwapCardStage.failed })
		logTxToDB({ tx_id: executedRoute.diagnosisUrl, status: 'failure', provider: 'rango', tx_data: stdRoute })
		trackEvent({ category: category.SwapCard, action: action.SwapFailed, label: 'swap_failed', data: { provider: 'rango', stdRoute } })
	} else if (executedRoute.status === 'success') {
		swapDispatch({ type: 'SET_SWAP_STAGE', payload: SwapCardStage.success })
		logTxToDB({ tx_id: executedRoute.diagnosisUrl, status: 'success', provider: 'rango', tx_data: stdRoute })
		trackEvent({ category: category.SwapCard, action: action.SwapSuccess, label: 'swap_success', data: { provider: 'rango', stdRoute } })
	}
}

export const handleLifiResponse = (executedRoute: Route, swapDispatch: Dispatch<SwapAction>) => {
	const stdRoute = standardiseLifiRoute(executedRoute)
	const lastExecutionStep = stdRoute.execution[stdRoute.execution.length - 1]
	swapDispatch({ type: 'UPDATE_LAST_SWAP_STEP' })

	if (lastExecutionStep?.status.toLowerCase() === 'done') {
		swapDispatch({ type: 'SET_SWAP_STAGE', payload: SwapCardStage.success })
		logTxToDB({ tx_id: executedRoute.id, status: 'success', provider: 'lifi', tx_data: stdRoute })
		trackEvent({ category: category.SwapCard, action: action.SwapSuccess, label: 'swap_success', data: { provider: 'lifi', stdRoute } })
	} else if (lastExecutionStep?.status.toLowerCase() === 'failed') {
		swapDispatch({ type: 'SET_SWAP_STAGE', payload: SwapCardStage.failed })
		logTxToDB({ tx_id: executedRoute.id, status: 'failure', provider: 'lifi', tx_data: stdRoute })
		trackEvent({ category: category.SwapCard, action: action.SwapFailed, label: 'swap_failed', data: { provider: 'lifi', stdRoute } })
	}
}

const test = {
	id: '0x2e8d7baa8a7d98648efb49c069db8d76e3529c0efacdc9d6391aabbd82ef75a3',
	provider: 'lifi',
	from: {
		token: {
			name: 'MATIC',
			address: '0x0000000000000000000000000000000000000000',
			symbol: 'MATIC',
			decimals: 18,
			price_usd: '0.807951000000000000',
			amount_usd: '8.89',
			amount: '11000000000000000000',
		},
		chain: { id: 137 },
		address: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
	},
	to: {
		token: {
			name: 'ETH',
			address: '0x0000000000000000000000000000000000000000',
			symbol: 'ETH',
			decimals: 18,
			price_usd: '2241.360000000000000000',
			amount_usd: '8.09',
			amount: '0.0036',
			amount_min: '3258242031557988',
		},
		chain: { id: 42161 },
		address: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
	},
	steps: [
		{
			id: '5dbb3d24-8869-4a5f-9b20-4ede66ca1953',
			from: {
				token: {
					name: 'MATIC',
					address: '0x0000000000000000000000000000000000000000',
					symbol: 'MATIC',
					decimals: 18,
					price_usd: '0.807951000000000000',
					amount: '11000000000000000000',
					logo_uri: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
				},
				chain: { id: '137' },
			},
			to: {
				token: {
					name: 'MATIC',
					address: '0x0000000000000000000000000000000000000000',
					symbol: 'MATIC',
					decimals: 18,
					price_usd: '0.807951000000000000',
					logo_uri: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
					amount: '10.978',
				},
				chain: { id: '137' },
			},
			tool: {
				name: 'Integrator Fee',
				estimated_execution_time_seconds: 0,
				slippage_limit: 0.05,
				fees: [{ amount: '0.022', asset: { chainId: '137', symbol: 'MATIC', decimals: 18, address: '0x0000000000000000000000000000000000000000' } }],
				fees_usd: 0.02,
				gas: [{ amount: '0.0000000000001', type: 'SEND', asset: { chainId: '137', symbol: 'MATIC', decimals: 18, address: '0x0000000000000000000000000000000000000000' } }],
				gas_usd: 0.01,
				logo_uri: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/protocols/feeCollection.png',
			},
		},
		{
			id: '941a7ece-131e-4335-9e50-2beefda1ecb4',
			from: {
				token: {
					name: 'MATIC',
					address: '0x0000000000000000000000000000000000000000',
					symbol: 'MATIC',
					decimals: 18,
					price_usd: '0.807951000000000000',
					amount: '10978000000000000000',
					logo_uri: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
				},
				chain: { id: '137' },
			},
			to: {
				token: {
					name: 'Wrapped Ether',
					address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
					symbol: 'WETH',
					decimals: 18,
					price_usd: '2246',
					logo_uri: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
					amount: '0.004',
				},
				chain: { id: '137' },
			},
			tool: {
				name: '1inch',
				estimated_execution_time_seconds: 30,
				slippage_limit: 0.05,
				fees: [],
				fees_usd: 0,
				gas: [{ amount: '0.0521', type: 'SEND', asset: { chainId: '137', symbol: 'MATIC', decimals: 18, address: '0x0000000000000000000000000000000000000000' } }],
				gas_usd: 0.04,
				logo_uri: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/exchanges/oneinch.png',
			},
		},
		{
			id: '419c1fb2-5e86-43f8-bb14-a2f5de286d8c',
			from: {
				token: {
					name: 'Wrapped Ether',
					address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
					symbol: 'WETH',
					decimals: 18,
					price_usd: '2246',
					amount: '3761027268603002',
					logo_uri: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
				},
				chain: { id: '137' },
			},
			to: {
				token: {
					name: 'ETH',
					address: '0x0000000000000000000000000000000000000000',
					symbol: 'ETH',
					decimals: 18,
					price_usd: '2241.360000000000000000',
					logo_uri: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
					amount: '0.0036',
				},
				chain: { id: '42161' },
			},
			tool: {
				name: 'Hop',
				estimated_execution_time_seconds: 183.206,
				slippage_limit: 0.05,
				fees: [
					{ amount: '0.000003', asset: { chainId: '42161', symbol: 'ETH', decimals: 18, address: '0x0000000000000000000000000000000000000000' } },
					{ amount: '0.0001', asset: { chainId: '42161', symbol: 'ETH', decimals: 18, address: '0x0000000000000000000000000000000000000000' } },
					{ amount: '0.0002', asset: { chainId: '42161', symbol: 'ETH', decimals: 18, address: '0x0000000000000000000000000000000000000000' } },
					{ amount: '0', asset: { chainId: '137', symbol: 'MATIC', decimals: 18, address: '0x0000000000000000000000000000000000000000' } },
				],
				fees_usd: 0.74,
				gas: [{ amount: '0.0383', type: 'SEND', asset: { chainId: '137', symbol: 'MATIC', decimals: 18, address: '0x0000000000000000000000000000000000000000' } }],
				gas_usd: 0.03,
				logo_uri: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/bridges/hop.png',
			},
		},
	],
	cost: {
		total_usd: '0.8',
		total_gas_usd: '0.10',
		total_fee: [
			{ amount: '0.146', asset: { chainId: '137', symbol: 'MATIC', address: '0x0000000000000000000000000000000000000000' } },
			{ amount: '0.000003', asset: { chainId: '42161', symbol: 'ETH', address: '0x0000000000000000000000000000000000000000' } },
		],
	},
	tags: ['RECOMMENDED', 'CHEAPEST'],
	insurance: { state: 'NOT_INSURABLE', fee_amount_usd: '0' },
	slippage_percent: 0.2,
	transaction_time_seconds: 213,
	execution: [null],
	originalRoute: {
		id: '0x2e8d7baa8a7d98648efb49c069db8d76e3529c0efacdc9d6391aabbd82ef75a3',
		fromChainId: 137,
		fromAmountUSD: '8.89',
		fromAmount: '11000000000000000000',
		fromToken: {
			address: '0x0000000000000000000000000000000000000000',
			chainId: 137,
			symbol: 'MATIC',
			decimals: 18,
			name: 'MATIC',
			coinKey: 'MATIC',
			logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
			priceUSD: '0.807951000000000000',
		},
		fromAddress: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
		toChainId: 42161,
		toAmountUSD: '8.09',
		toAmount: '3610240478180596',
		toAmountMin: '3258242031557988',
		toToken: {
			address: '0x0000000000000000000000000000000000000000',
			chainId: 42161,
			symbol: 'ETH',
			decimals: 18,
			name: 'ETH',
			coinKey: 'ETH',
			logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
			priceUSD: '2241.360000000000000000',
		},
		toAddress: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
		gasCostUSD: '0.10',
		containsSwitchChain: false,
		steps: [
			{
				type: 'lifi',
				id: '93ace6e6-ff12-41ad-ae81-1275df6828ce',
				tool: 'hop',
				toolDetails: { key: 'hop', name: 'Hop', logoURI: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/bridges/hop.png' },
				action: {
					fromToken: {
						address: '0x0000000000000000000000000000000000000000',
						chainId: 137,
						symbol: 'MATIC',
						decimals: 18,
						name: 'MATIC',
						coinKey: 'MATIC',
						logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
						priceUSD: '0.807951000000000000',
					},
					fromAmount: '11000000000000000000',
					toToken: {
						address: '0x0000000000000000000000000000000000000000',
						chainId: 42161,
						symbol: 'ETH',
						decimals: 18,
						name: 'ETH',
						coinKey: 'ETH',
						logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
						priceUSD: '2241.360000000000000000',
					},
					fromChainId: 137,
					toChainId: 42161,
					slippage: 0.05,
					fromAddress: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
					toAddress: '0x70E73f067a1fC9FE6D53151bd271715811746d3a',
				},
				estimate: {
					tool: 'hop',
					approvalAddress: '0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE',
					toAmountMin: '3258242031557988',
					toAmount: '3610240478180596',
					fromAmount: '11000000000000000000',
					feeCosts: [
						{
							name: 'Integrator Fee',
							description: 'Fee shared between integrator and LI.FI',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
							amount: '22000000000000000',
							amountUSD: '0.02',
							percentage: '0',
							included: true,
						},
						{
							name: 'LP Fee',
							description: 'Fee paid to the Liquidity Provider',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 42161,
								symbol: 'ETH',
								decimals: 18,
								name: 'ETH',
								coinKey: 'ETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2241.360000000000000000',
							},
							amount: '3008821814882',
							amountUSD: '0.01',
							percentage: '0.0008',
							included: true,
						},
						{
							name: 'Bonder Fee',
							description: 'Fee paid to the Bonder',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 42161,
								symbol: 'ETH',
								decimals: 18,
								name: 'ETH',
								coinKey: 'ETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2241.360000000000000000',
							},
							amount: '111590703155339',
							amountUSD: '0.25',
							percentage: '0.0297',
							included: true,
						},
						{
							name: 'Destination Tx Fee',
							description: 'Fee paid to account for gas costs on the destination chain',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 42161,
								symbol: 'ETH',
								decimals: 18,
								name: 'ETH',
								coinKey: 'ETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2241.360000000000000000',
							},
							amount: '215180896970320',
							amountUSD: '0.48',
							percentage: '0.0572',
							included: true,
						},
						{
							name: 'Relayer Fee',
							description: 'Fee charged on source chain to pay for relaying',
							percentage: '0.0000',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
							amount: '0',
							amountUSD: '0.00',
							included: false,
						},
					],
					gasCosts: [
						{
							type: 'SEND',
							price: '166519911664',
							estimate: '742762',
							limit: '1085762',
							amount: '123684662627375968',
							amountUSD: '0.10',
							token: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
						},
					],
					executionDuration: 213.206,
					fromAmountUSD: '8.89',
					toAmountUSD: '8.09',
				},
				includedSteps: [
					{
						id: '5dbb3d24-8869-4a5f-9b20-4ede66ca1953',
						type: 'protocol',
						action: {
							fromChainId: 137,
							fromAmount: '11000000000000000000',
							fromToken: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
							toChainId: 137,
							toToken: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
							slippage: 0.05,
						},
						estimate: {
							fromAmount: '11000000000000000000',
							toAmount: '10978000000000000000',
							toAmountMin: '10978000000000000000',
							tool: 'feeCollection',
							approvalAddress: '0xbD6C7B0d2f68c2b7805d88388319cfB6EcB50eA9',
							gasCosts: [
								{
									type: 'SEND',
									amount: '100000',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 137,
										symbol: 'MATIC',
										decimals: 18,
										name: 'MATIC',
										coinKey: 'MATIC',
										logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
										priceUSD: '0.807951000000000000',
									},
									price: '166519911664',
									limit: '200000',
									estimate: '200000',
									amountUSD: '0.01',
								},
							],
							feeCosts: [
								{
									name: 'Integrator Fee',
									description: 'Fee shared between integrator and LI.FI',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 137,
										symbol: 'MATIC',
										decimals: 18,
										name: 'MATIC',
										coinKey: 'MATIC',
										logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
										priceUSD: '0.807951000000000000',
									},
									amount: '22000000000000000',
									amountUSD: '0.02',
									percentage: '0',
									included: true,
								},
							],
							executionDuration: 0,
						},
						tool: 'feeCollection',
						toolDetails: { key: 'feeCollection', name: 'Integrator Fee', logoURI: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/protocols/feeCollection.png' },
					},
					{
						id: '941a7ece-131e-4335-9e50-2beefda1ecb4',
						type: 'swap',
						action: {
							fromChainId: 137,
							fromAmount: '10978000000000000000',
							fromToken: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 137,
								symbol: 'MATIC',
								decimals: 18,
								name: 'MATIC',
								coinKey: 'MATIC',
								logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
								priceUSD: '0.807951000000000000',
							},
							toChainId: 137,
							toToken: {
								address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
								chainId: 137,
								symbol: 'WETH',
								decimals: 18,
								name: 'Wrapped Ether',
								coinKey: 'WETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2246',
							},
							slippage: 0.05,
						},
						estimate: {
							tool: '1inch',
							fromAmount: '10978000000000000000',
							toAmount: '3958976072213686',
							toAmountMin: '3761027268603002',
							approvalAddress: '0x1111111254eeb25477b68fb85ed929f73a960582',
							executionDuration: 30,
							feeCosts: [],
							gasCosts: [
								{
									type: 'SEND',
									price: '166519911664',
									estimate: '312762',
									limit: '469143',
									amount: '52081100611855968',
									amountUSD: '0.04',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 137,
										symbol: 'MATIC',
										decimals: 18,
										name: 'MATIC',
										coinKey: 'MATIC',
										logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
										priceUSD: '0.807951000000000000',
									},
								},
							],
						},
						tool: '1inch',
						toolDetails: { key: '1inch', name: '1inch', logoURI: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/exchanges/oneinch.png' },
					},
					{
						id: '419c1fb2-5e86-43f8-bb14-a2f5de286d8c',
						type: 'cross',
						action: {
							fromChainId: 137,
							fromAmount: '3761027268603002',
							fromToken: {
								address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
								chainId: 137,
								symbol: 'WETH',
								decimals: 18,
								name: 'Wrapped Ether',
								coinKey: 'WETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2246',
							},
							toChainId: 42161,
							toToken: {
								address: '0x0000000000000000000000000000000000000000',
								chainId: 42161,
								symbol: 'ETH',
								decimals: 18,
								name: 'ETH',
								coinKey: 'ETH',
								logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
								priceUSD: '2241.360000000000000000',
							},
							slippage: 0.05,
							destinationGasConsumption: '0',
							destinationCallData:
								'0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
						},
						estimate: {
							tool: 'hop',
							fromAmount: '3958976072213686',
							toAmount: '3610240478180596',
							toAmountMin: '3258242031557988',
							approvalAddress: '0xc315239cFb05F1E130E7E28E603CEa4C014c57f0',
							executionDuration: 183.206,
							feeCosts: [
								{
									name: 'LP Fee',
									description: 'Fee paid to the Liquidity Provider',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 42161,
										symbol: 'ETH',
										decimals: 18,
										name: 'ETH',
										coinKey: 'ETH',
										logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
										priceUSD: '2241.360000000000000000',
									},
									amount: '3008821814882',
									amountUSD: '0.01',
									percentage: '0.0008',
									included: true,
								},
								{
									name: 'Bonder Fee',
									description: 'Fee paid to the Bonder',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 42161,
										symbol: 'ETH',
										decimals: 18,
										name: 'ETH',
										coinKey: 'ETH',
										logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
										priceUSD: '2241.360000000000000000',
									},
									amount: '111590703155339',
									amountUSD: '0.25',
									percentage: '0.0297',
									included: true,
								},
								{
									name: 'Destination Tx Fee',
									description: 'Fee paid to account for gas costs on the destination chain',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 42161,
										symbol: 'ETH',
										decimals: 18,
										name: 'ETH',
										coinKey: 'ETH',
										logoURI: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
										priceUSD: '2241.360000000000000000',
									},
									amount: '215180896970320',
									amountUSD: '0.48',
									percentage: '0.0572',
									included: true,
								},
								{
									name: 'Relayer Fee',
									description: 'Fee charged on source chain to pay for relaying',
									percentage: '0.0000',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 137,
										symbol: 'MATIC',
										decimals: 18,
										name: 'MATIC',
										coinKey: 'MATIC',
										logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
										priceUSD: '0.807951000000000000',
									},
									amount: '0',
									amountUSD: '0.00',
									included: false,
								},
							],
							gasCosts: [
								{
									type: 'SEND',
									price: '166519911664',
									estimate: '230000',
									limit: '345000',
									amount: '38299579682720000',
									amountUSD: '0.03',
									token: {
										address: '0x0000000000000000000000000000000000000000',
										chainId: 137,
										symbol: 'MATIC',
										decimals: 18,
										name: 'MATIC',
										coinKey: 'MATIC',
										logoURI: 'https://static.debank.com/image/matic_token/logo_url/matic/6f5a6b6f0732a7a235131bd7804d357c.png',
										priceUSD: '0.807951000000000000',
									},
								},
							],
						},
						tool: 'hop',
						toolDetails: { key: 'hop', name: 'Hop', logoURI: 'https://raw.githubusercontent.com/lifinance/types/main/src/assets/icons/bridges/hop.png' },
					},
				],
				integrator: 'concero',
			},
		],
		insurance: { state: 'NOT_INSURABLE', feeAmountUsd: '0' },
		tags: ['RECOMMENDED', 'CHEAPEST'],
	},
	error:
		'TransactionError: user rejected transaction (action="sendTransaction", transaction={"data":"0xd40e64cc0000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000012a4c4c891deb000000000000000000000000000000000000000000000000000b924ed343e3e100000000000000000000000000000000000000000000000000000000658610e7000000000000000000000000000000000000000000000000000b924ed343e3e100000000000000000000000000000000000000000000000000000000658610e7000000000000000000000000c315239cfb05f1e130e7e28e603cea4c014c57f0000000000000000000000000710bda329b2a6224e4b44833de30f38e7f81d56400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000639909c5e61a98a927a73c0b4a4863dc17de1d247d925e96e72094f94d6fb68c0000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f61900000000000000000000000070e73f067a1fc9fe6d53151bd271715811746d3a000000000000000000000000000000000000000000000000000d5ca26655ec7a000000000000000000000000000000000000000000000000000000000000a4b1000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003686f7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007636f6e6365726f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000bd6c7b0d2f68c2b7805d88388319cfb6ecb50ea9000000000000000000000000bd6c7b0d2f68c2b7805d88388319cfb6ecb50ea90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000098a7d9b8314c000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000064e0cbc5f2000000000000000000000000000000000000000000000000003e871b540c0000000000000000000000000000000000000000000000000000000fa1c6d50300000000000000000000000000008a31a0df686d409d25c90d5905165dd5bd05ea20000000000000000000000000000000000000000000000000000000000000000000000000000000001111111254eeb25477b68fb85ed929f73a9605820000000000000000000000001111111254eeb25477b68fb85ed929f73a96058200000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000000000000000000000000009859b0d6083d000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a8e449022e0000000000000000000000000000000000000000000000009859b0d6083d0000000000000000000000000000000000000000000000000000000d5ca26655ec790000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000140000000000000000000000033c4f0043e2e988b3c2e9c77e2c670efe709bfe32e9b3012000000000000000000000000000000000000000000000000","to":"0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE","value":"0x98a7d9b8314c0000","from":"0x70E73f067a1fC9FE6D53151bd271715811746d3a","chainId":137,"gasPrice":{"type":"BigNumber","hex":"0x1b05193b45"},"gasLimit":{"type":"BigNumber","hex":"0x08e258"}}, code=ACTION_REJECTED, version=providers/5.7.2)',
	session_id: '',
}
